---
import type { ImageMetadata } from 'astro';
import WaitlistButton from './waitlist-button.astro';

type Props = {
  background: ImageMetadata;
  ingress: string;
  body?: string;
}

const { background, ingress, body } = Astro.props;
---

<div class="pitch flow">
  <div class="background">
    <div class="content">
      {Astro.slots.has('title') && (
        <slot name="title" />
      )}
      <p class="ingress">{ingress}</p>
      {body != null && (
        <p class="body">{body}</p>
      )}
      <WaitlistButton inverted />
    </div>
  </div>
</div>

<style define:vars={{ background: `url(${background.src})` }}>
  .flow {
    border-radius: var(--radius-2xl);
    overflow-x: hidden;

    .background {
      height: 100%;
      background-image: var(--background);
      background-size: calc(100% + 20px) calc(100% + 20px);
      background-position: -10px -10px;
      background-repeat: no-repeat;

      .content {
        /* Dim the animated background a bit to make the text more readable. */
        height: 100%;
        background-color: var(--color-base-primary-alpha-60);
        color: var(--color-base-background);
      }
    }
  }
</style>

<style>
  .pitch {
    width: 100%;

    .content {
      padding-block: calc(var(--spacing) * 32);
      padding-inline: calc(var(--spacing) * 6);

      text-align: center;
      display: flex;
      flex-direction: column;
      gap: calc(var(--spacing) * 6);
      align-items: center;

      .ingress {
        margin: 0;
        max-width: 56.25rem;
        font-weight: var(--font-weight-extrabold);
        line-height: 100%;

        font-size: var(--text-2xl-font-size);
        @media (min-width: 60rem) {
          font-size: var(--text-5xl-font-size);
        }
      }

      .body {
        max-width: 38.875rem;

        font-size: var(--text-sm-font-size);
        line-height: var(--text-sm-line-height);
        @media(min-width: 60rem) {
          font-size: var(--text-lg-font-size);
          line-height: var(--text-lg-line-height);
        }
      }
    }
  }
</style>
